# =============================================================================
# CONFIGURATION PRODUCTION - Aristote RAG Chatbot
# =============================================================================
# Copiez ce fichier vers .env et remplissez les valeurs
# Ne JAMAIS commiter le fichier .env !
# =============================================================================

# =============================================================================
# API ARISTOTE (DRASI) - LLM souverain
# =============================================================================
ARISTOTE_API_KEY=votre_token_aristote_ici
ARISTOTE_API_BASE=https://llm.ilaas.fr/v1

# =============================================================================
# API ALBERT (Etalab) - Embeddings, Rerank, Vision
# Obtenez votre clé : https://albert.api.etalab.gouv.fr
# =============================================================================
ALBERT_API_KEY=votre_token_albert_ici
ALBERT_API_BASE=https://albert.api.etalab.gouv.fr/v1

# Modèles Albert (optionnel - valeurs par défaut recommandées)
# ALBERT_EMBEDDING_MODEL=embeddings-small
# ALBERT_LLM_MODEL=albert-large
# ALBERT_RERANK_MODEL=rerank-small
# ALBERT_VISION_MODEL=albert-large

# =============================================================================
# OLLAMA (local) - Alternative souveraine pour embeddings
# =============================================================================
# Si vous déployez Ollama sur le serveur
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_EMBEDDING_MODEL=nomic-embed-text

# =============================================================================
# PROVIDERS PAR DÉFAUT
# =============================================================================
# Provider embeddings : "ollama" (local) ou "albert" (API)
DEFAULT_EMBEDDING_PROVIDER=albert

# Provider LLM : "aristote" (DRASI) ou "albert" (Etalab)
DEFAULT_LLM_PROVIDER=aristote

# Activer le reranking Albert (améliore la pertinence, consomme des tokens)
RERANK_ENABLED=false

# Activer la vision Albert (extraction tableaux/graphiques des PDF)
VISION_ENABLED=false

# =============================================================================
# CHEMINS DE DONNÉES
# =============================================================================
# Répertoire principal des données (ChromaDB, métadonnées)
ARISTOTE_DATA_DIR=/var/lib/aristote-rag

# Répertoire des logs
ARISTOTE_LOG_DIR=/var/log/aristote-rag

# =============================================================================
# SÉCURITÉ
# =============================================================================
# Taille max des fichiers uploadés (10 MB par défaut)
MAX_FILE_SIZE=10485760

# Rate limiting : requêtes max par fenêtre de temps
RATE_LIMIT_REQUESTS=20
RATE_LIMIT_WINDOW=60

# Historique de conversation max
MAX_HISTORY_LENGTH=20

# =============================================================================
# AUTHENTIFICATION MULTI-TENANT
# =============================================================================
# Mode : "none" (pas d'auth), "simple" (login/mdp), "cas" (SSO académique)
#
# IMPORTANT pour l'isolation des données utilisateur :
# - AUTH_MODE=none : Tous les utilisateurs partagent la même base de documents
# - AUTH_MODE=simple : Chaque utilisateur a sa propre base (isolation par login)
# - AUTH_MODE=cas : Chaque utilisateur SSO a sa propre base (isolation par identifiant CAS)
#
AUTH_MODE=none

# Secret pour signer les sessions (générer avec: python -c "import secrets; print(secrets.token_hex(32))")
# REQUIS si AUTH_MODE != none
SESSION_SECRET=

# Configuration CAS (si AUTH_MODE=cas)
# CAS_SERVER_URL=https://cas.ac-votreacademie.fr/cas

# =============================================================================
# DEBUG
# =============================================================================
# Activer le mode debug (affiche les détails des requêtes LLM)
DEBUG=false

# =============================================================================
# STREAMLIT
# =============================================================================
STREAMLIT_PORT=8501
STREAMLIT_ADDRESS=0.0.0.0
